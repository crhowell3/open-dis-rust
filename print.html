<!DOCTYPE HTML>
<html lang="en" class="monokai sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "monokai" : "monokai";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('monokai')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/crhowell3/open-dis-rust" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="open-dis-rust"><a class="header" href="#open-dis-rust">Open DIS Rust</a></h1>
<p><strong>Open DIS Rust</strong> is an open-source implementation of the IEEE 1278.1-2012 Distributed
Interactive Simulation (DIS) application protocol. This library defines all Protocol
Data Units (PDUs) listed within the standard documentation as well as all associated
data types, records, and enumerations.</p>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>Open DIS Rust is free and open source. You can find the source code as well as
report issues and create feature requests on <a href="https://github.com/crhowell3/open-dis-rust">GitHub</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="acquiring-open-dis-rust"><a class="header" href="#acquiring-open-dis-rust">Acquiring Open DIS Rust</a></h1>
<ul>
<li><a href="acquiring.html#crates.io">From Crates.io</a></li>
<li><a href="acquiring.html#build-from-source">Build from Source</a></li>
</ul>
<h3 id="cratesio"><a class="header" href="#cratesio">crates.io</a></h3>
<p>In your project, run <code>cargo add open-dis-rust</code> or add <code>open-dis-rust = "&lt;version&gt;"</code> to your Cargo.toml.</p>
<h3 id="build-from-source"><a class="header" href="#build-from-source">Build from Source</a></h3>
<p>Clone the open-dis-rust GitHub repository and build with cargo.</p>
<p>Requirements:</p>
<ul>
<li><a href="https://www.rust-lang.org/tools/install">Rust toolchain</a></li>
<li><a href="https://git-scm.com/">Git version control</a></li>
</ul>
<pre><code class="language-shell"># Clone the repo
git clone https://github.com/crhowell3/open-dis-rust.git

cd open-dis-rust

# Build and test
cargo build --release
cargo test
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="get-in-touch"><a class="header" href="#get-in-touch">Get in touch</a></h1>
<p>If you have any questions about Open DIS Rust, feel free to contact a maintainer. If you have
any feature requests and/or bugs to report, please open a ticket on <a href="https://github.com/crhowell3/open-dis-rust">GitHub</a>.</p>
<h2 id="maintainers"><a class="header" href="#maintainers">Maintainers</a></h2>
<ul>
<li><a href="https://github.com/crhowell3">https://github.com/crhowell3</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="creating-a-pdu"><a class="header" href="#creating-a-pdu">Creating a PDU</a></h1>
<p>The IEEE 1278.1-2012 standard defines 72 PDUs, all of which have been
implemented in this crate. While the topics and contents of the PDUs
differ, each PDU can be easily instantiated.</p>
<h3 id="importing-modules"><a class="header" href="#importing-modules">Importing Modules</a></h3>
<p>The PDUs are divided into separate protocol families, which are groups
of PDUs that serve a similar purpose. To begin creating a PDU, first
import the PDU's module, or, if using multiple PDUs from the same family,
import the entire protocol family module.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Imports just the Acknowledge PDU module
use open_dis_rust::simulation_management::acknowledge_pdu::AcknowledgePdu;

// Imports the entire SIMAN protocol family, including the associated data types
use open_dis_rust::simulation_management::*;
<span class="boring">}</span></code></pre></pre>
<h3 id="creating-a-pdu-1"><a class="header" href="#creating-a-pdu-1">Creating a PDU</a></h3>
<p>To instantiate a PDU, use the PDU's <code>default</code> method to pre-populate all its
fields with data.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut acknowledge_pdu = AcknowledgePdu::default();
<span class="boring">}</span></code></pre></pre>
<p>It is advised to use the <code>mut</code> keyword so that the default values within the
PDU's fields can be manipulated before sending it over UDP.</p>
<h3 id="editing-the-pdu-fields"><a class="header" href="#editing-the-pdu-fields">Editing the PDU Fields</a></h3>
<p>Each PDU has different fields; no two PDUs have the exact same fields. Every
PDU is guaranteed to have a <code>pdu_header</code> field that is of type <code>PduHeader</code>.
See the crate documentation for more information on this type. It is generally
advised that this field and its subfields should not be directly edited because
it contains the header information that a receiver would need to correctly
parse and interpret the data. Upon calling <code>default</code>, this field is pre-populated
with the correct metadata for the PDU, and it should not be edited afterwards.</p>
<p>All other fields within a PDU can be safely edited so long as the data being
assigned to them is of the correct type and length. For most fields, editing
the value is just a simple assignment, especially with primitive data types.
However, there are other types that require a little more work to construct
before assigning. Type information can be found within the crate documentation.</p>
<p>The following is an example for editing a PDU field that is a primitive type.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Instantiate a default Acknowledge PDU
let mut acknowledge_pdu = AcknowledgePdu::default();

// Valid assignment of the request_id field
acknowledge_pdu.request_id = 14;
<span class="boring">}</span></code></pre></pre>
<p>The following is an example for editing a PDU field that is of a special type.</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Instantiate a default Acknowledge PDU
let mut acknowledge_pdu = AcknowledgePdu::default();

// Assignment occurring field-wise for the originating_entity_id field
acknowledge_pdu.originating_entity_id.simulation_address.application_id = 1;
acknowledge_pdu.originating_entity_id.simulation_address.site_id = 3;
acknowledge_pdu.originating_entity_id.entity_id = 12;

// Assignment can also occur by creating an EntityId and assigning
let mut origin_id = EntityId::default(1);
origin_id.simulation_address.application_id = 1;
origin_id.simulation_address.site_id = 4;
origin_id.entity_id = 15;
acknowledge_pdu.originating_entity_id = origin_id;
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sending-pdus"><a class="header" href="#sending-pdus">Sending PDUs</a></h1>
<p>While the network protocol is not required to be UDP, this crate has been validated
against UDP topology, and the example code provided uses UDP as the protocol.</p>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p>This demonstration utilizes the <code>open_dis_rust</code> crate as well as the <code>bytes</code> and
<code>tokio</code> crates.</p>
<h2 id="create-and-serialize-the-pdu"><a class="header" href="#create-and-serialize-the-pdu">Create and Serialize the PDU</a></h2>
<p>As shown in the previous section, we can create a PDU as such:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use open_dis_rust::simulation_management::acknowledge_pdu::AcknowledgePdu;

let mut ack_pdu = AcknowledgePdu::default();
<span class="boring">}</span></code></pre></pre>
<p>Then, we need to create an empty, mutable byte array into which we will serialize
the PDU:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use bytes::BytesMut;

let mut bytes = BytesMut::new();
<span class="boring">}</span></code></pre></pre>
<p>Now, we simply call the <code>serialize</code> function from the PDU and pass in a mutable
reference to the byte array:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>ack_pdu.serialize(&amp;mut bytes);
<span class="boring">}</span></code></pre></pre>
<p>The PDU has now been serialized into the byte array and is ready to be sent.</p>
<h2 id="initializing-a-udp-socket"><a class="header" href="#initializing-a-udp-socket">Initializing a UDP Socket</a></h2>
<p>We need to select an address and a port to send the message. For this exercise,
we will assume the address is <code>localhost (127.0.0.1)</code>, and we will use port <code>3000</code>.
To create the socket, we use the <code>tokio</code> crate:</p>
<pre><pre class="playground"><code class="language-rust">use bytes::BytesMut;
use std::net::SocketAddr;
use std::io;
use tokio::net::UdpSocket;

use open_dis_rust::simulation_management::acknowledge_pdu::AcknowledgePdu;

#[tokio::main]
async fn main() -&gt; io::Result&lt;()&gt; {
    let socket = UdpSocket::bind("0.0.0.0:3000").await?;
    let remote_addr = "127.0.0.1:3000";

    socket.connect(remote_addr).await?;
  
    let mut ack_pdu = AcknowledgePdu::default();
    let mut bytes = BytesMut::new();

    ack_pdu.serialize(&amp;mut bytes);
    socket.send(&amp;bytes[..]).await?;
}</code></pre></pre>
<p>We create a UDP socket and bind it to all network interfaces, specifically on port
<code>3000</code>. We then establish a one-to-one connection to <code>127.0.0.0:3000</code>. Afterwards,
we take our serialized PDU and send it via the socket's <code>send()</code> function. Anything
listening on 127.0.0.1:3000 will be able to receive the message.</p>
<p>A tutorial on receiving and parsing a PDU is available in the next section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="receiving-pdus"><a class="header" href="#receiving-pdus">Receiving PDUs</a></h1>
<p>The same dependencies are required as listed in the previous section.</p>
<h2 id="receiving-and-parsing-a-pdu"><a class="header" href="#receiving-and-parsing-a-pdu">Receiving and Parsing a PDU</a></h2>
<p>Using the same UDP socket that we created in the previous section, we
can receive a PDU and decode it from the byte array.</p>
<pre><pre class="playground"><code class="language-rust">use bytes::BytesMut;
use std::net::SocketAddr;
use std::io;
use tokio::net::UdpSocket;

use open_dis_rust::simulation_management::acknowledge_pdu::AcknowledgePdu;

#[tokio::main]
async fn main() -&gt; io::Result&lt;()&gt; {
    let socket = UdpSocket::bind("0.0.0.0:3000").await?;
    let remote_addr = "127.0.0.1:3000";

    socket.connect(remote_addr).await?;

    let mut buf = vec![0; 1204];
    let n = socket.recv(&amp;mut buf[..]).await?;
    loop {
        if n &gt; 0 {
          dbg!(AcknowledgePdu::deserialize(BytesMut::from(buf.as_slice())).unwrap());
          break;
        }
    }
    Ok(())
}</code></pre></pre>
<p>In most cases, the receiver is going to be listening for a particular PDU or range of
PDUs. Using the above code as an example, if the data received is not able to be
deserialized into an AcknowledgePdu, an error will be returned. This can be further
handled by the user.</p>
<p>There are other ways to determine what type of PDU the data represents, such as reading
the raw byte array and finding the byte that represents the <code>pdu_type</code> field in the header.
Then, the user could set up a match tree to attempt to parse the PDU, if they are expected
to handle it, of course.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
